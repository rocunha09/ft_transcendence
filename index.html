<!doctype html>
<html lang="pt-br">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

  <link rel="stylesheet" href="css/style.css">

  <title>ft_transcendence</title>
</head>

<body class="body-bg-color">

  <!-- ALERT DE ERRO AO TENTAR LOGAR  -->
  <div id="alert" class="alert alert-danger" role="alert" style="display: none;">
    Usuário ou senha Inválidos!
  </div>

  <!-- ALERTA DE ERRO: EMAIL/USUÁRIO JÁ CADASTRADO -->
  <div id="alert-email" class="alert alert-danger" role="alert" style="display: none;">
    Email/Usuário já cadastrado
  </div>

  <!-- ALERTA DE ERRO: SENHAS NÃO COMPATÍVEIS -->
  <div id="alert-password-mismatch" class="alert alert-danger" role="alert" style="display: none;">
    Senhas não compatíveis
  </div>

  <!-- ALERTA DE ERRO: SENHA NÃO ATENDE A POLÍTICA -->
  <div id="alert-password-policy" class="alert alert-danger" role="alert" style="display: none;">
    A senha deve ter: A senha deve ter pelo menos 8 caracteres e incluir letras e números.
  </div>

  <!-- ALERTA DE SUCESSO AO CADASTRAR -->
  <div id="alert-success" class="alert alert-success" role="alert" style="display: none;">
    Usuário cadastrado com sucesso! Voltando à tela de login!
  </div>

  <div class="container full-height d-flex justify-content-center align-items-center">
    <div class="row">
      <div class="col-12">

        <div class="card mx-auto p-3 card-glow">
          <div class="card-body">

            <div class="row">
              <div class="col">
                <h3 class="mb-4 text-center">Entrar</h3>
              </div>
            </div>

            <!--INICIO DO FORM-->
            <form action="#" class="signin-form">

              <div class="form-group mt-3">
                <label class="form-control-placeholder" for="username">Nome de Usuário</label>
                <input id="login_field" name="login_field" type="text" class="form-control" required />
              </div>

              <div class="form-group">
                <label class="form-control-placeholder" for="password">Senha</label>
                <input id="password_field" name="password_field" type="password" class="form-control" required>
                <span toggle="#password-field" class="fa fa-fw fa-eye field-icon toggle-password"></span>
              </div>

              <div class="form-group ">
                <button id="btSubmit" type="submit"
                  class="form-control btn btn-primary rounded submit px-3">Entrar</button>
              </div>
              <div class="row mt-3">
                <div class="col">
                  <div class="form-group ">

                    <div class="text-center">
                      <a href="#">Esqueci minha Senha</a>
                    </div>

                  </div>
                </div>
              </div>

            </form>
            <!--FIM DO FORM-->
            <p class="text-center mt-5">Não possui Cadastro?😯 <a id="register" class="btn btn-link" data-toggle="modal" data-target="#registrationModal">Cadastrar</a></p>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Cadastro -->
  <div class="modal fade" id="registrationModal" tabindex="-1" role="dialog" aria-labelledby="registrationModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="registrationModalLabel">Cadastrar</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div id="registration_modal" class="modal-body">
          <!-- INÍCIO DO FORMULÁRIO DE CADASTRO -->
          <form id="registrationForm" class="signin-form">
            <div class="form-group mt-3">
              <input id="email_field" name="email_field" type="email" class="form-control" required />
              <label class="form-control-placeholder" for="email">Email</label>
            </div>

            <div class="form-group">
              <input id="username_field" name="username_field" type="text" class="form-control" required />
              <label class="form-control-placeholder" for="username">Nome de Usuário</label>
            </div>

            <div class="form-group">
              <input id="password_field" name="password_field" type="password" class="form-control" required />
              <label class="form-control-placeholder" for="password">Senha</label>
              <small id="passwordHelp" class="form-text text-muted">A senha deve ter pelo menos 8 caracteres e incluir
                letras e números.</small>
            </div>

            <div class="form-group">
              <input id="confirm_password_field" name="confirm_password_field" type="password" class="form-control"
                required />
              <label class="form-control-placeholder" for="confirm_password">Confirmar Senha</label>
            </div>

            <div class="form-group">
              <button id="btRegister" type="submit"
                class="form-control btn btn-primary rounded submit px-3">Cadastrar</button>
            </div>

            <div class="form-group text-center">
              <button id="btBack" type="button" class="form-control btn btn-secondary rounded submit px-3" data-dismiss="modal">Voltar</button>
            </div>
          </form>
          <!-- FIM DO FORMULÁRIO DE CADASTRO -->

        </div>
      </div>
    </div>
  </div>


  <script src="js/jquery.min.js"></script>
  <script src="js/popper.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/main.js"></script>







  <!--TEMPORÁRIO, APENAS PARA TESTES de exibição do alert-->
  <script>
    $(document).ready(function () {
      // Evento de clique no botão
      $('#btSubmit').on('click', function (event) {
        event.preventDefault(); // Impede o envio do formulário
        var password = $('#password_field').val();

        // Verifica se o comprimento da senha é menor que 3
        if (password.length < 3) {
          $('#alert').show(); // Mostra o alerta
        } else {
          $('#alert').hide(); // Esconde o alerta se a senha for válida
        }
      });

      // Evento de clique em qualquer parte da tela
      $(document).on('click', function (event) {
        // Verifica se o clique não foi dentro do alerta ou do formulário
        if (!$(event.target).closest('#alert, .signin-form').length) {
          $('#alert').hide(); // Esconde o alerta
        }
      });

      // Evento de clique no botão de cadastro
      $('#btRegister').on('click', function(event) {
            event.preventDefault(); // Impede o envio do formulário de cadastro

            var email = $('#email_field').val();
            var password = $('#password_field').val();
            var confirmPassword = $('#confirm_password_field').val();
            var username = $('#username_field').val();

            // Reset alerts
            $('#alert-email').hide();
            $('#alert-password-mismatch').hide();
            $('#alert-password-policy').hide();
            $('#alert-success').hide();

            // Verifica se todos os campos estão preenchidos
            if (!email || !username || !password || !confirmPassword) {
                $('#alert-email').show(); // Mostra o alerta de campos vazios
                $('#alert-password-mismatch').show(); // Mostra o alerta de campos vazios
                $('#alert-password-policy').show(); // Mostra o alerta de campos vazios
            } else if (email === 'teste@example.com' || username === 'testuser') {
                $('#alert-email').show(); // Mostra o alerta de email/usuário já cadastrado
            } else if (password !== confirmPassword) {
                $('#alert-password-mismatch').show(); // Mostra o alerta de senhas não compatíveis
            } else if (!/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(password)) {
                $('#alert-password-policy').show(); // Mostra o alerta de política de senha
            } else {
                $('#alert-success').show(); // Mostra o alerta de sucesso
                setTimeout(function() {
                    // Redireciona para a tela de login após 2 segundos
                    $('#registrationModal').modal('hide');
                }, 2000);
            }
        });

        // Evento de clique em qualquer parte da tela para esconder alertas
        $(document).on('click', function(event) {
            // Verifica se o clique não foi dentro dos alertas ou do formulário
            if (!$(event.target).closest('#alert-email, #alert-password-mismatch, #alert-password-policy, #alert-success, #registrationForm, #loginForm').length) {
                $('#alert-email').hide(); // Esconde o alerta
                $('#alert-password-mismatch').hide(); // Esconde o alerta
                $('#alert-password-policy').hide(); // Esconde o alerta
                $('#alert-success').hide(); // Esconde o alerta
            }
        });
    });
  </script>

</body>

</html>